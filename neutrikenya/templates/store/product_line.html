{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product_line.name }} - Neutriherbs Kenya{% endblock %}

{% block meta_description %}Explore our complete line of {{ product_line.name }} products. Natural, effective skincare solutions for all skin types.{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section Styles */
    .product-line-hero {
        background-color: #f8f9fa;
        padding: 6rem 0;
        position: relative;
        overflow: hidden;
        border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .product-line-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at center, rgba(212,175,55,0.08) 0%, rgba(212,175,55,0.03) 40%, transparent 70%);
        background-size: 120% 120%;
        background-position: center;
        animation: pulse-bg 15s infinite alternate;
    }
    
    @keyframes pulse-bg {
        0% { background-size: 120% 120%; }
        100% { background-size: 140% 140%; }
    }
    
    .product-line-hero h1 {
        font-size: 2.75rem;
        font-weight: 700;
        margin-bottom: 1rem;
        position: relative;
    }
    
    .product-line-hero h1::after {
        content: '';
        display: block;
        width: 80px;
        height: 4px;
        background: linear-gradient(to right, #d4af37, rgba(212,175,55,0.3));
        margin-top: 0.75rem;
        border-radius: 2px;
    }
    
    .product-line-hero p {
        font-size: 1.1rem;
        max-width: 600px;
        margin-bottom: 2rem;
        color: #555;
        line-height: 1.6;
    }
    
    /* Modern Hero Button */
    .product-line-hero .btn-dark {
        background: linear-gradient(to right, #d4af37, #c19d2f);
        border: none;
        color: white;
        padding: 0.8rem 2rem;
        border-radius: 50px;
        font-weight: 600;
        letter-spacing: 0.5px;
        box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        transition: all 0.3s ease;
    }
    
    .product-line-hero .btn-dark:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        background: linear-gradient(to right, #c19d2f, #d4af37);
    }
    
    /* Modern hero image styling */
    .hero-image-container {
        position: relative;
        overflow: hidden;
        border-radius: 12px;
        box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        transform: perspective(1000px) rotateY(-5deg);
        transition: all 0.5s ease;
    }
    
    .hero-image-container:hover {
        transform: perspective(1000px) rotateY(0deg);
    }
    
    .hero-image-container img {
        transform: scale(1.02);
        transition: transform 0.7s ease;
    }
    
    .hero-image-container:hover img {
        transform: scale(1.05);
    }
    
    /* Modern Product Cards */
    .product-card {
        border: 1px solid rgba(0,0,0,0.08);
        border-radius: 10px;
        overflow: hidden;
        transition: all 0.3s ease;
        height: 100%;
        max-height: 350px;
        position: relative;
        background-color: #fff;
        box-shadow: 0 3px 10px rgba(0,0,0,0.05);
    }
    
    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        border-color: rgba(212,175,55,0.2);
    }
    
    .product-img-container {
        height: 85%;
        overflow: hidden;
        position: relative;
        background-color: #f8f9fa;
    }
    
    .product-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
    }
    
    .product-card:hover .product-img {
        transform: scale(1.07);
    }
    
    .product-info {
        padding: 0.6rem;
        position: relative;
        text-align: center;
        display: flex;
        flex-direction: column;
        height: calc(100% - 85%);
        gap: 4px;
    }
    
    .product-title {
        font-size: 0.9rem;
        font-weight: 500;
        margin-bottom: 0.2rem;
        height: 2.4rem;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        color: #333;
    }
    
    .product-price {
        font-weight: 600;
        color: #d4af37;
        margin-bottom: 0.3rem;
        display: flex;
        align-items: center;
        gap: 5px;
        justify-content: center;
    }
    
    .product-price .original-price {
        text-decoration: line-through;
        color: #999;
        font-size: 0.8rem;
        font-weight: normal;
    }
    
    .product-price .sale-price {
        color: #d4af37;
        font-size: 0.95rem;
    }
    
    /* Modern Badge Styling */
    .badge, .product-badge {
        position: absolute;
        padding: 0.35rem 0.65rem;
        font-size: 0.7rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        border-radius: 4px;
        z-index: 10;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .badge-bestseller {
        top: 10px;
        left: 10px;
        background-color: #d4af37;
        color: white;
    }
    
    .badge-sale {
        top: 10px;
        right: 10px;
        background-color: #e74c3c;
        color: white;
    }
    
    .badge-new {
        top: 10px;
        left: 10px;
        background-color: #555;
        color: white;
    }
    
    /* Quick View Button */
    .quick-view {
        position: absolute;
        top: 5px;
        right: 5px;
        width: 30px;
        height: 30px;
        background-color: rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.3s ease;
        z-index: 20;
        font-size: 0.8rem;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .product-card:hover .quick-view {
        opacity: 1;
        transform: translateY(0);
    }
    
    .quick-view:hover {
        background-color: white;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }
    
    /* Stock Status */
    .stock-status {
        position: absolute;
        bottom: 0.6rem;
        right: 0.6rem;
        font-size: 0.75rem;
        padding: 0.15rem 0.4rem;
        border-radius: 3px;
        font-weight: 600;
    }
    
    .in-stock {
        color: #2ecc71;
        background-color: rgba(46, 204, 113, 0.1);
        border: 1px solid rgba(46, 204, 113, 0.2);
    }
    
    .low-stock {
        color: #f39c12;
        background-color: rgba(243, 156, 18, 0.1);
        border: 1px solid rgba(243, 156, 18, 0.2);
    }
    
    .out-of-stock {
        color: #e74c3c;
        background-color: rgba(231, 76, 60, 0.1);
        border: 1px solid rgba(231, 76, 60, 0.2);
    }
    
    /* Action Buttons */
    .product-action {
        display: flex;
        gap: 3px;
        margin-top: 0.4rem;
    }
    
    .view-details-btn, .add-to-cart-btn {
        border: none;
        border-radius: 4px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }
    
    .view-details-btn {
        padding: 0.15rem 0.5rem;
        background-color: transparent;
        color: #555;
        border: 1px solid #ddd;
    }
    
    .view-details-btn:hover {
        background-color: #f5f5f5;
        border-color: #ccc;
    }
    
    .add-to-cart-btn {
        padding: 5px;
        background-color: #d4af37;
        color: white;
        flex-grow: 1;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .add-to-cart-btn:hover {
        background-color: #c19d2f;
    }
    
    /* Product Ratings */
    .product-rating {
        display: flex;
        align-items: center;
        margin-bottom: 0.3rem;
        justify-content: center;
    }
    
    .rating-stars {
        color: #f1c40f;
        font-size: 0.8rem;
        margin-right: 5px;
    }
    
    .rating-count {
        font-size: 0.75rem;
        color: #777;
    }
    
    .product-rating span {
        color: #d4af37 !important;
        letter-spacing: 2px;
    }
    
    /* Modern product info section */
    .product-info {
        padding: 0.75rem 0.85rem;
        text-align: center;
        display: flex;
        flex-direction: column;
        height: calc(100% - 85%);
        gap: 4px;
        position: relative;
    }
    
    /* Modern product badges */
    .product-badge {
        position: absolute;
        top: 12px;
        left: 12px;
        padding: 0.25rem 0.6rem;
        border-radius: 4px;
        font-size: 0.7rem;
        font-weight: 600;
        z-index: 5;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        letter-spacing: 0.5px;
    }
    
    .badge-new {
        background-color: #555;
        color: white;
    }
    
    /* Modern product rating */
    .product-rating {
        margin-bottom: 3px;
    }
    
    .product-rating span {
        color: #d4af37 !important;
        letter-spacing: 2px;
    }
    
    /* Modern stock status */
    .stock-status {
        margin-bottom: 5px;
        font-size: 0.75rem;
        padding: 3px 8px;
        border-radius: 3px;
        display: inline-block;
        font-weight: 600;
    }
    
    /* Modern buttons */
    .product-actions {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-top: auto;
        padding-top: 5px;
    }
    
    .btn-outline-dark {
        border: 1.5px solid #d4af37;
        color: #d4af37;
        background-color: transparent;
        border-radius: 4px;
        font-weight: 600;
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
        transition: all 0.2s ease;
        margin-bottom: 0 !important;
    }
    
    .btn-outline-dark:hover {
        background-color: #d4af37;
        color: white;
        transform: translateY(-2px);
    }
    
    .add-to-cart-btn {
        background: linear-gradient(to right, #d4af37, #c19d2f);
        color: white;
        border: none;
        border-radius: 4px;
        font-weight: 600;
        font-size: 0.8rem;
        padding: 7px;
        transition: all 0.2s ease;
        width: 100%;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .add-to-cart-btn:hover {
        background: linear-gradient(to right, #c19d2f, #b18d1f);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(212, 175, 55, 0.25);
    }
    
    /* Benefits Section */
    .benefit-card {
        text-align: center;
        padding: 2rem;
        border-radius: 12px;
        background-color: white;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        transition: all 0.3s ease;
    }
    
    .benefit-card:hover {
        transform: translateY(-5px);
    }
    
    .benefit-icon {
        font-size: 2.5rem;
        color: #555;
        margin-bottom: 1rem;
    }
    
    /* How to Use Section */
    .step-card {
        padding: 1.5rem;
        border-radius: 12px;
        background-color: var(--bs-light);
        height: 100%;
    }
    
    .step-number {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #d4af37; /* Gold color */
        color: white;
        font-weight: 700;
        margin-bottom: 1rem;
    }
    
    /* Limited Time Offer Banner */
    .limited-offer-banner {
        background: linear-gradient(135deg, #555, #333);
        color: white;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
    }
    
    .limited-offer-banner::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("{% static 'images/pattern-light.png' %}");
        background-size: 200px;
        background-repeat: repeat;
        opacity: 0.1;
    }
    
    .countdown-timer {
        display: flex;
        gap: 0.5rem;
        margin: 1rem 0;
    }
    
    .countdown-value {
        background: rgba(255,255,255,0.9);
        color: #555;
        font-size: 1.2rem;
        font-weight: 700;
        padding: 0.5rem 0.75rem;
        border-radius: 4px;
        min-width: 40px;
        text-align: center;
    }
    
    .countdown-label {
        font-size: 0.7rem;
        text-align: center;
        opacity: 0.8;
    }

    /* Featured Products Section */
    .featured-product-card {
        display: flex;
        flex-direction: column;
        height: 100%;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.08);
    }
    
    .featured-product-img {
        height: 250px;
        object-fit: cover;
    }
    
    .featured-product-info {
        padding: 1.5rem;
        flex-grow: 1;
        display: flex;
        flex-direction: column;
    }
    
    .featured-product-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }
    
    .featured-product-rating {
        color: #555;
        margin-bottom: 0.5rem;
    }
    
    .featured-product-price-container {
        margin-top: auto;
    }
    
    /* Testimonial Section */
    .testimonial-card {
        background-color: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        margin-bottom: 1.5rem;
    }
    
    .testimonial-rating {
        color: #555;
        margin-bottom: 1rem;
    }
    
    .testimonial-content {
        font-style: italic;
        margin-bottom: 1rem;
    }
    
    .testimonial-author {
        display: flex;
        align-items: center;
    }
    
    .testimonial-author img {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 1rem;
    }
    
    /* Trust Badges */
    .trust-badge {
        display: flex;
        align-items: center;
        padding: 1rem;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .trust-badge-icon {
        font-size: 1.5rem;
        color: #555;
        margin-right: 1rem;
    }
    
    /* Responsive */
    @media (max-width: 767.98px) {
        .product-line-hero h1 {
            font-size: 2.25rem;
        }
        
        .product-line-hero p {
            font-size: 1rem;
        }
    }

    /* Call to Action Section */
    .bg-dark .btn-light {
        background-color: #d4af37; /* Gold color */
        border-color: #d4af37;
        color: white;
    }

    .bg-dark .btn-light:hover {
        background-color: #c19d2f; /* Darker gold */
        border-color: #c19d2f;
    }

    /* WhatsApp Chat Button */
    .position-fixed .btn-dark {
        background-color: #d4af37; /* Gold color */
        border-color: #d4af37;
    }

    .position-fixed .btn-dark:hover {
        background-color: #c19d2f; /* Darker gold */
        border-color: #c19d2f;
    }

    /* View Details buttons */
    .btn-outline-dark {
        border-color: #d4af37; /* Gold color */
        color: #d4af37;
    }

    .btn-outline-dark:hover {
        background-color: #d4af37;
        border-color: #d4af37;
        color: white;
    }

    /* Stars color */
    .product-rating span, .testimonial-rating i {
        color: #d4af37 !important; /* Gold color */
    }

    /* Quick view button styling */
    .quick-view {
        position: absolute;
        top: 5px;
        right: 5px;
        opacity: 0;
        transition: all 0.3s ease;
        background-color: white;
        color: #d4af37;
        border: none;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        font-size: 0.8rem;
    }

    .quick-view:hover {
        background-color: #d4af37;
        color: white;
    }

    .product-card:hover .quick-view {
        opacity: 1;
        transform: translateY(0);
    }

    /* Make price display more compact */
    .d-flex.justify-content-center.align-items-center.mb-3 {
        margin-bottom: 5px !important;
    }

    /* Adjust "View Details" button */
    .btn-outline-dark.btn-sm {
        padding: 0.15rem 0.5rem;
        font-size: 0.8rem;
        margin-bottom: 0 !important;
    }
</style>
{% endblock %}

{% block content %}
<!-- Breadcrumb -->
<nav class="bg-light py-3">
    <div class="container">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a href="{% url 'store:home' %}">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'store:shop' %}">Shop</a></li>
            <li class="breadcrumb-item active">{{ product_line.name }}</li>
        </ol>
    </div>
</nav>

<!-- Hero Section -->
<section class="product-line-hero">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h1>{{ product_line.name }}</h1>
                <p class="lead">{{ product_line.description }}</p>
                <a href="#featured-products" class="btn btn-dark btn-lg shadow">Shop Now</a>
                {% if product_line.name == 'Vitamin C' %}
                <span class="ms-3 badge bg-secondary p-2">BESTSELLER</span>
                {% endif %}
            </div>
            <div class="col-lg-6 text-center mt-4 mt-lg-0">
                {% if product_line.image %}
                <div class="hero-image-container">
                <img src="{{ product_line.image.url }}" alt="{{ product_line.name }}" class="img-fluid rounded shadow-lg">
                </div>
                {% else %}
                <div class="hero-image-container">
                <img src="{% static 'images/placeholder.jpg' %}" alt="{{ product_line.name }}" class="img-fluid rounded shadow-lg">
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Limited Time Offer Banner -->
<section class="py-4">
    <div class="container">
        <div class="limited-offer-banner shadow-lg">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h3 class="mb-1"><i class="fas fa-bolt me-2"></i>LIMITED TIME OFFER!</h3>
                    <p class="mb-2">Get 15% OFF all {{ product_line.name }} products with code 
                    {% if product_line.name == 'Vitamin C' %}
                        <strong>VITC15</strong>
                    {% elif product_line.name == 'Retinol' %}
                        <strong>RETIN15</strong>
                    {% elif product_line.name == 'Hyaluronic Acid' %}
                        <strong>HYDRA15</strong>
                    {% else %}
                        <strong>SAVE15</strong>
                    {% endif %}
                    </p>
                    <div class="countdown-timer">
                        <div class="countdown-item">
                            <div class="countdown-value" id="days">01</div>
                            <div class="countdown-label">Days</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-value" id="hours">12</div>
                            <div class="countdown-label">Hours</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-value" id="minutes">45</div>
                            <div class="countdown-label">Minutes</div>
                        </div>
                        <div class="countdown-item">
                            <div class="countdown-value" id="seconds">33</div>
                            <div class="countdown-label">Seconds</div>
                        </div>
                    </div>
                    <p class="small mb-0"><i class="fas fa-users me-1"></i> <strong>17 people</strong> purchased today</p>
                </div>
                <div class="col-md-4 text-center text-md-end mt-3 mt-md-0">
                    <a href="#featured-products" class="btn btn-light btn-lg px-4 py-2">
                        SHOP NOW <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Benefits Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">Benefits of {{ product_line.name }}</h2>
        <div class="row g-4">
            {% if product_line.benefit_1_title %}
            <div class="col-md-4">
                <div class="benefit-card h-100">
                    <div class="benefit-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h4>{{ product_line.benefit_1_title }}</h4>
                    <p>{{ product_line.benefit_1_description }}</p>
                </div>
            </div>
            {% endif %}
            
            {% if product_line.benefit_2_title %}
            <div class="col-md-4">
                <div class="benefit-card h-100">
                    <div class="benefit-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h4>{{ product_line.benefit_2_title }}</h4>
                    <p>{{ product_line.benefit_2_description }}</p>
                </div>
            </div>
            {% endif %}
            
            {% if product_line.benefit_3_title %}
            <div class="col-md-4">
                <div class="benefit-card h-100">
                    <div class="benefit-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <h4>{{ product_line.benefit_3_title }}</h4>
                    <p>{{ product_line.benefit_3_description }}</p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Featured Products Section -->
<section class="py-5 bg-light" id="featured-products">
    <div class="container">
        <h2 class="text-center mb-2">Featured {{ product_line.name }} Products</h2>
        <p class="text-center text-muted mb-5">Discover our bestselling products in this line</p>
        
        <div class="row g-4">
            {% for product in featured_products %}
            <div class="col-md-6 col-lg-3">
                <div class="product-card h-100">
                    {% if forloop.first %}
                        <div class="product-badge badge-bestseller">BEST SELLER</div>
                    {% endif %}
                    {% if forloop.counter == 2 %}
                        <div class="product-badge badge-new">NEW</div>
                    {% endif %}
                    {% if product.is_on_sale %}
                        <div class="product-badge badge-sale">SALE</div>
                    {% endif %}
                    
                    <div class="product-img-container">
                        {% for image in product.images.all %}
                            {% if image.is_main %}
                                <img src="{{ image.image.url }}" alt="{{ product.name }}" class="product-img">
                            {% endif %}
                        {% empty %}
                            <div class="bg-light w-100 h-100 d-flex align-items-center justify-content-center">
                                <i class="fas fa-image fa-3x text-secondary"></i>
                            </div>
                        {% endfor %}
                        <button class="btn btn-sm rounded-circle shadow quick-view" data-product-id="{{ product.id }}" data-bs-toggle="modal" data-bs-target="#quickViewModal">
                                <i class="fas fa-eye"></i>
                            </button>
                    </div>
                    <div class="product-info">
                        <h6 class="product-title">{{ product.name }}</h6>
                        <div class="product-rating mb-2">
                            <span class="text-warning">★★★★★</span>
                            <small class="text-muted">({{ forloop.counter|add:15 }})</small>
                        </div>
                        
                        <!-- Stock Status -->
                        {% if forloop.counter == 1 or forloop.counter == 4 %}
                            <div class="stock-status in-stock">
                                <i class="fas fa-check-circle"></i> In Stock
                            </div>
                        {% elif forloop.counter == 2 %}
                            <div class="stock-status low-stock">
                                <i class="fas fa-exclamation-circle"></i> Only 2 left!
                            </div>
                        {% elif forloop.counter == 3 %}
                            <div class="stock-status out-of-stock">
                                <i class="fas fa-times-circle"></i> Out of Stock
                            </div>
                        {% endif %}
                        
                        <div class="d-flex justify-content-center align-items-center mb-3">
                            {% if product.is_on_sale and product.original_price %}
                                <span class="product-original-price">KSh {{ product.original_price }}</span>
                                <span class="product-price">KSh {{ product.price }}</span>
                                <span class="badge bg-danger ms-2">-{{ product.discount_percentage }}%</span>
                            {% else %}
                                <span class="product-price">KSh {{ product.price }}</span>
                            {% endif %}
                        </div>
                        
                        <div class="product-actions">
                            <a href="{{ product.get_absolute_url }}" class="btn btn-outline-dark btn-sm w-100 mb-2">View Details</a>
                        
                        {% if forloop.counter == 3 %}
                            <button class="btn btn-secondary w-100" disabled>
                                Out of Stock
                            </button>
                            <button class="btn btn-outline-dark btn-sm w-100 mt-2">
                                <i class="fas fa-bell me-1"></i> Notify Me
                            </button>
                        {% else %}
                            <form action="{% url 'store:add_to_cart' product.id %}" method="post" class="add-to-cart-form">
                                {% csrf_token %}
                                <input type="hidden" name="quantity" value="1">
                                <button type="submit" class="add-to-cart-btn">
                                    <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                                </button>
                            </form>
                        {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
                <!-- Mock Featured Products -->
                <!-- Product 1 -->
                <div class="col-md-6 col-lg-3">
                    <div class="product-card h-100">
                        <div class="product-badge badge-bestseller">BEST SELLER</div>
                        <div class="product-img-container">
                            {% if product_line.name == 'Vitamin C' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitaminc-cream.jpg" alt="Vitamin C Brightening Cream" class="product-img">
                            {% elif product_line.name == 'Retinol' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/retinol-cream.jpg" alt="Retinol Night Cream" class="product-img">
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/hyaluronic-acid-serum.jpg" alt="Hyaluronic Acid Serum" class="product-img">
                            {% else %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitaminc-cream.jpg" alt="Featured Product" class="product-img">
                            {% endif %}
                            <button class="btn btn-sm rounded-circle shadow quick-view" data-bs-toggle="modal" data-bs-target="#quickViewModal">
                                <i class="fas fa-eye"></i>
                            </button>
                    </div>
                        <div class="product-info">
                            {% if product_line.name == 'Vitamin C' %}
                                <h6 class="product-title">Vitamin C Brightening Cream</h6>
                            {% elif product_line.name == 'Retinol' %}
                                <h6 class="product-title">Retinol Night Cream</h6>
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <h6 class="product-title">Hyaluronic Acid Serum</h6>
                            {% else %}
                                <h6 class="product-title">Premium Facial Cream</h6>
                            {% endif %}
                            <div class="product-rating mb-2">
                                <span>★★★★★</span>
                                <small class="text-muted">(42)</small>
                            </div>
                            <div class="stock-status in-stock">
                                <i class="fas fa-check-circle"></i> In Stock
                            </div>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <span class="product-original-price">KSh 3,500</span>
                                <span class="product-price">KSh 2,999</span>
                                <span class="badge bg-danger ms-2">-15%</span>
                            </div>
                            <div class="product-actions">
                                <a href="#" class="btn btn-outline-dark btn-sm w-100 mb-2">View Details</a>
                                <form action="#" method="post" class="add-to-cart-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="quantity" value="1">
                                    <button type="submit" class="add-to-cart-btn">
                                        <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Product 2 -->
                <div class="col-md-6 col-lg-3">
                    <div class="product-card h-100">
                        <div class="product-badge badge-new">NEW</div>
                        <div class="product-img-container">
                            {% if product_line.name == 'Vitamin C' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitaminc-serum.jpg" alt="Vitamin C Serum" class="product-img">
                            {% elif product_line.name == 'Retinol' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/retinol-serum.jpg" alt="Retinol Serum" class="product-img">
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/hyaluronic-acid-moisturizer.jpg" alt="Hyaluronic Acid Moisturizer" class="product-img">
                            {% else %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitaminc-serum.jpg" alt="Featured Product" class="product-img">
                            {% endif %}
                            <button class="btn btn-sm rounded-circle shadow quick-view" data-bs-toggle="modal" data-bs-target="#quickViewModal">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            {% if product_line.name == 'Vitamin C' %}
                                <h6 class="product-title">Vitamin C Brightening Serum</h6>
                            {% elif product_line.name == 'Retinol' %}
                                <h6 class="product-title">Retinol Anti-Aging Serum</h6>
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <h6 class="product-title">Hyaluronic Acid Moisturizer</h6>
                            {% else %}
                                <h6 class="product-title">Advanced Facial Serum</h6>
                            {% endif %}
                            <div class="product-rating mb-2">
                                <span>★★★★★</span>
                                <small class="text-muted">(29)</small>
                            </div>
                            <div class="stock-status low-stock">
                                <i class="fas fa-exclamation-circle"></i> Only 2 left!
                            </div>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <span class="product-price">KSh 3,299</span>
                            </div>
                            <div class="product-actions">
                                <a href="#" class="btn btn-outline-dark btn-sm w-100 mb-2">View Details</a>
                                <form action="#" method="post" class="add-to-cart-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="quantity" value="1">
                                    <button type="submit" class="add-to-cart-btn">
                                        <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Product 3 -->
                <div class="col-md-6 col-lg-3">
                    <div class="product-card h-100">
                        <div class="product-badge badge-sale">SALE</div>
                        <div class="product-img-container">
                            {% if product_line.name == 'Vitamin C' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitaminc-cleanser.jpg" alt="Vitamin C Cleanser" class="product-img">
                            {% elif product_line.name == 'Retinol' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/retinol-toner.jpg" alt="Retinol Toner" class="product-img">
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/hyaluronic-acid-mask.jpg" alt="Hyaluronic Acid Mask" class="product-img">
                            {% else %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitaminc-cleanser.jpg" alt="Featured Product" class="product-img">
                            {% endif %}
                            <button class="btn btn-sm rounded-circle shadow quick-view" data-bs-toggle="modal" data-bs-target="#quickViewModal">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            {% if product_line.name == 'Vitamin C' %}
                                <h6 class="product-title">Vitamin C Facial Cleanser</h6>
                            {% elif product_line.name == 'Retinol' %}
                                <h6 class="product-title">Retinol Refining Toner</h6>
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <h6 class="product-title">Hyaluronic Acid Sheet Mask</h6>
                            {% else %}
                                <h6 class="product-title">Gentle Facial Cleanser</h6>
                            {% endif %}
                            <div class="product-rating mb-2">
                                <span>★★★★★</span>
                                <small class="text-muted">(35)</small>
                            </div>
                            <div class="stock-status out-of-stock">
                                <i class="fas fa-times-circle"></i> Out of Stock
                            </div>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <span class="product-original-price">KSh 2,500</span>
                                <span class="product-price">KSh 1,999</span>
                                <span class="badge bg-danger ms-2">-20%</span>
                            </div>
                            <div class="product-actions">
                                <a href="#" class="btn btn-outline-dark btn-sm w-100 mb-2">View Details</a>
                                <button class="btn btn-secondary w-100" disabled>
                                    Out of Stock
                                </button>
                                <button class="btn btn-outline-dark btn-sm w-100 mt-2">
                                    <i class="fas fa-bell me-1"></i> Notify Me
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Product 4 -->
                <div class="col-md-6 col-lg-3">
                    <div class="product-card h-100">
                        <div class="product-img-container">
                            {% if product_line.name == 'Vitamin C' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitamin-c-set.jpg" alt="Vitamin C Complete Set" class="product-img">
                            {% elif product_line.name == 'Retinol' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/retinol-set.jpg" alt="Retinol Complete Set" class="product-img">
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <img src="https://neutriherbs.com/cdn/shop/products/hyaluronic-acid-set.jpg" alt="Hyaluronic Acid Set" class="product-img">
                            {% else %}
                                <img src="https://neutriherbs.com/cdn/shop/products/vitamin-c-set.jpg" alt="Featured Product" class="product-img">
                            {% endif %}
                            <button class="btn btn-sm rounded-circle shadow quick-view" data-bs-toggle="modal" data-bs-target="#quickViewModal">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="product-info">
                            {% if product_line.name == 'Vitamin C' %}
                                <h6 class="product-title">Vitamin C Complete Set</h6>
                            {% elif product_line.name == 'Retinol' %}
                                <h6 class="product-title">Retinol Complete Set</h6>
                            {% elif product_line.name == 'Hyaluronic Acid' %}
                                <h6 class="product-title">Hyaluronic Acid Complete Set</h6>
                            {% else %}
                                <h6 class="product-title">Premium Skincare Set</h6>
                            {% endif %}
                            <div class="product-rating mb-2">
                                <span>★★★★★</span>
                                <small class="text-muted">(52)</small>
                            </div>
                            <div class="stock-status in-stock">
                                <i class="fas fa-check-circle"></i> In Stock
                            </div>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <span class="product-price">KSh 7,999</span>
                            </div>
                            <div class="product-actions">
                                <a href="#" class="btn btn-outline-dark btn-sm w-100 mb-2">View Details</a>
                                <form action="#" method="post" class="add-to-cart-form">
                                    {% csrf_token %}
                                    <input type="hidden" name="quantity" value="1">
                                    <button type="submit" class="add-to-cart-btn">
                                        <i class="fas fa-shopping-cart me-2"></i> Add to Cart
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- How to Use Section -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-5">How to Use {{ product_line.name }} Products</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="step-card h-100">
                    <div class="step-number">1</div>
                    <h4>Cleanse</h4>
                    <p>Start with a clean face by using a gentle cleanser suitable for your skin type. This ensures that the {{ product_line.name }} products can penetrate effectively.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card h-100">
                    <div class="step-number">2</div>
                    <h4>Apply</h4>
                    <p>Apply a small amount of your {{ product_line.name }} product to your face and neck. Gently massage into the skin using upward circular motions.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card h-100">
                    <div class="step-number">3</div>
                    <h4>Follow Up</h4>
                    <p>Follow with a moisturizer to lock in the benefits of {{ product_line.name }}. For daytime use, always finish with a broad-spectrum sunscreen.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Customer Testimonials -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">What Our Customers Say</h2>
        <div class="row g-4">
            <div class="col-lg-4">
                <div class="testimonial-card h-100">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-content">"I've been using Neutriherbs {{ product_line.name }} products for 3 months now and the difference in my skin is amazing! My complexion is brighter and my dark spots have significantly faded."</p>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/45.jpg" alt="Testimonial Author">
                        <div>
                            <h6 class="mb-0">Jane M.</h6>
                            <small class="text-muted">Verified Buyer</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="testimonial-card h-100">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-content">"After just 2 weeks of using the {{ product_line.name }} serum, my friends started asking what I've been doing differently! The glow is real and the texture of my skin has improved dramatically."</p>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Testimonial Author">
                        <div>
                            <h6 class="mb-0">David K.</h6>
                            <small class="text-muted">Verified Buyer</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="testimonial-card h-100">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <p class="testimonial-content">"I've tried many {{ product_line.name }} products before, but Neutriherbs is on another level. The formula is gentle yet effective, and I love that it's made with natural ingredients. Will definitely repurchase!"</p>
                    <div class="testimonial-author">
                        <img src="https://randomuser.me/api/portraits/women/68.jpg" alt="Testimonial Author">
                        <div>
                            <h6 class="mb-0">Sarah N.</h6>
                            <small class="text-muted">Verified Buyer</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Trust Badges -->
<section class="py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3">
                <div class="trust-badge">
                    <div class="trust-badge-icon">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Free Shipping</h6>
                        <small class="text-muted">On orders over KSh 3,000</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="trust-badge">
                    <div class="trust-badge-icon">
                        <i class="fas fa-undo"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">30-Day Returns</h6>
                        <small class="text-muted">No questions asked</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="trust-badge">
                    <div class="trust-badge-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Secure Payments</h6>
                        <small class="text-muted">SSL encrypted checkout</small>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="trust-badge">
                    <div class="trust-badge-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <div>
                        <h6 class="mb-0">Naturally Sourced</h6>
                        <small class="text-muted">Clean ingredients</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="py-5 bg-dark text-white text-center">
    <div class="container">
        <h2 class="mb-4">Ready to transform your skin with {{ product_line.name }}?</h2>
        <p class="lead mb-4">Join thousands of satisfied customers who have experienced the Neutriherbs difference.</p>
        <a href="#featured-products" class="btn btn-light btn-lg px-5">Shop Now</a>
    </div>
</section>

<!-- WhatsApp Chat Button -->
<div class="position-fixed" style="bottom: 20px; right: 20px; z-index: 1000;">
    <a href="https://wa.me/254700000000" target="_blank" class="btn btn-dark rounded-circle shadow p-3" style="width: 60px; height: 60px;">
        <i class="fab fa-whatsapp fa-2x text-white"></i>
    </a>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Countdown Timer
    function updateCountdown() {
        // Set end date to 1 day from now
        var endDate = new Date();
        endDate.setDate(endDate.getDate() + 1);
        endDate.setHours(endDate.getHours() + 8);
        
        // Update countdown every second
        function update() {
            var now = new Date();
            var diff = endDate - now;
            
            // Calculate days, hours, minutes, seconds
            var days = Math.floor(diff / (1000 * 60 * 60 * 24));
            var hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            // Update DOM elements
            var daysElement = document.getElementById('days');
            var hoursElement = document.getElementById('hours');
            var minutesElement = document.getElementById('minutes');
            var secondsElement = document.getElementById('seconds');
            
            if (daysElement) daysElement.textContent = days < 10 ? '0' + days : days;
            if (hoursElement) hoursElement.textContent = hours < 10 ? '0' + hours : hours;
            if (minutesElement) minutesElement.textContent = minutes < 10 ? '0' + minutes : minutes;
            if (secondsElement) secondsElement.textContent = seconds < 10 ? '0' + seconds : seconds;
            
            // If countdown is over
            if (diff <= 0) {
                clearInterval(interval);
                if (daysElement) daysElement.textContent = '00';
                if (hoursElement) hoursElement.textContent = '00';
                if (minutesElement) minutesElement.textContent = '00';
                if (secondsElement) secondsElement.textContent = '00';
            }
        }
        
        // Initial call
        update();
        
        // Update every second
        var interval = setInterval(update, 1000);
    }
    
    // Start countdown
    if (document.getElementById('days')) {
        updateCountdown();
    }
    
    // Add to cart functionality for AJAX submission
    var addToCartForms = document.querySelectorAll('.add-to-cart-form');
    
    for (var i = 0; i < addToCartForms.length; i++) {
        addToCartForms[i].addEventListener('submit', function(e) {
            e.preventDefault();
            
            var formData = new FormData(this);
            var url = this.action;
            var button = this.querySelector('button');
            var originalButtonText = button.innerHTML;
            
            // Show loading state
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Adding...';
            button.disabled = true;
            
            fetch(url, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(function(response) { 
                return response.json(); 
            })
            .then(function(data) {
                if (data.success) {
                    // Show success message
                    button.innerHTML = '<i class="fas fa-check"></i> Added!';
                    button.classList.add('bg-dark');
                    
                    // Update cart counter if it exists
                    var cartCounter = document.querySelector('.cart-counter');
                    if (cartCounter) {
                        cartCounter.textContent = data.item_count;
                    }
                    
                    // Reset after delay
                    setTimeout(function() {
                        button.innerHTML = originalButtonText;
                        button.classList.remove('bg-dark');
                        button.disabled = false;
                    }, 2000);
                }
            })
            .catch(function(error) {
                console.error('Error:', error);
                button.innerHTML = originalButtonText;
                button.disabled = false;
            });
        });
    }
    
    // Scroll to products when clicking "Shop Now" buttons
    var shopButtons = document.querySelectorAll('a[href="#featured-products"]');
    for (var j = 0; j < shopButtons.length; j++) {
        shopButtons[j].addEventListener('click', function(e) {
            e.preventDefault();
            var featuredSection = document.querySelector('#featured-products');
            if (featuredSection) {
                featuredSection.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    }
});
</script>
{% endblock %} 